FIND_PACKAGE_IF(DL UNIX REQUIRED)
FIND_PACKAGE_IF(DEMANGLE SOLARIS REQUIRED)

# collect headers and sources to create a library
FILE(GLOB Reflex_SRCS *.cxx *.h)
FILE(GLOB_RECURSE Reflex_HDRS ${REFLEX_INCLUDE_DIR}/*.h)
ADD_LIBRARY(Reflex ${Reflex_SRCS} ${Reflex_HDRS})

# link in dl if it exists
IF(UNIX)
    LIST(APPEND Additional_LIBRARIES ${DL_LIBRARY})
ENDIF(UNIX)
IF(SOLARIS)
    LIST(APPEND Additional_LIBRARIES ${DEMANGLE_LIBRARY})
ENDIF(SOLARIS)

TARGET_LINK_LIBRARIES(Reflex ${Additional_LIBRARIES})

# install
INSTALL(TARGETS Reflex ${INSTALL_TARGETS_DEFAULT_ARGS})
