<html>
<head><link href="../cscroot.css" rel="stylesheet" type="text/css"><title>ROOT Exercise II - Solution</title></head>
<body class="solution">
<h1>ROOT Exercise II - Solution</h1>
<p>Got stuck? This is the solution</p>
<h2>2 Reading a Tree </h2>

<div class="exercise">
<p>To accelerate the I/O for the non-split tree, we now enable <tt>TTree</tt>'s pre-fetch mechanism, confusingly called
      'cache'. This is disabled by default; use the documentation to find out how to enable it. Use <tt>TTree::Draw()</tt> of the
      same expression again (on the non-split tree). Do you notice any timing differences?</p>
</div>

<p>If you still plot <tt>fE</tt> then your code might look like this:</p>
<pre>
#include "TROOT.h"
#include "TFile.h"
#include "TTree.h"
#include "TRandom.h"
#include "TClonesArray.h"
#include "myparticle.h"
#include "TH1F.h"

void read_tree()
{
   // function reading particles collection in a tree

   // open the Root file
   TFile *f = new TFile("http://server/exercise2_nonsplit.root");
   // get the tree from the file
   TTree *myTree = (TTree*)f-&gt;Get("MyTree");
   // Enable prefetching
   myTree-&gt;SetCacheSize();
   
   // initialize Root's timing mechanism
   gROOT-&gt;Time();
   
   // Magic of TTree::Draw()!!!!
   myTree-&gt;Draw("muons.fE", "");

   // display the time elapsed since the first call to gROOT-&gt;Time()
   gROOT-&gt;Time();
}
</pre>
<p>You should see that this is faster - as fast as for the split tree.
ROOT still has to read the full muons branch, but it does that before you need the data,
so when you need it it's already there.</p>
</body>
</html>
