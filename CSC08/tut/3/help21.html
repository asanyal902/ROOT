<html>
<head><title>ROOT Exercise III - Help Level 1</title></head>
<body class="help1">
<h1>ROOT Exercise III - Help Level 1</h1>
<p>Got stuck? This might help:</p>
<h2>1 Split Level</h2>

<div class="exercise">
Now change the macro <a href="exercise3.C" class="source">exercise3.C</a>
such that the tree is generated with split level 0 instead of 99.
Did the compression factor change? Why? Did the timing change? Why?
</div>

<p>Check the lecture on how to adjust the split level; hint: it is a property of the branch.</p>
<p>Re-read the lecture's part on splitting to answer why the compression factor and the timing has changed:
with split level 99, the branch's data is ordered by data member,
whereas with split level 0 all data members are stored as one "blob" within the object that contains these data members.
Combine that with some knowledge about what "zipping" really is (e.g. from <a href="http://en.wikipedia.org/wiki/ZIP_(file_format)">wikipedia.com</a>):
it uses the <a href="http://en.wikipedia.org/wiki/DEFLATE">DEFLATE</a> algorithm to compress data,
which in turn is an implementation using <a href="http://en.wikipedia.org/wiki/Huffman_coding">Huffman Coding</a>.
That should get you to the key ingredient:
if you have a lot of identical consecutive bytes you get a good compression factor, e.g
12 consecutive float values of 3.0 followed by 12 floats of 0.7 compress much better than
12 consecutive pairs of 3.0, 0.7. Now how is that related to the split level?</p>
<p>The timing changes because split level 99 means ROOT has to handle and write a lot of baskets (branch buffers) per tree because the tree has a lot of branches.
This causes an overhead in writing.</p>

<a href="help2s.html" class="solution">SOLUTION!</a>
</body>
</html>
