<html>
<head><link href="../cscroot.css" rel="stylesheet" type="text/css"><title>ROOT Exercise III - Solution</title></head>
<body class="solution">
<h1>ROOT Exercise III - Solution</h1>
<p>Got stuck? This is the solution</p>
<h2>Running a TSelector with PROOF <em>[OPTIONAL!]</em> </h2>

<div class="exercise">
<p>Try to change the number of workers on your computer (e.g set up 6 workers).</p>
</div>

<p>As stated in the Proof wiki page, the number of workers can be changed using the 
xpd.localwrks entry in the configuration file (xpd.cf).</p>

<p>If you already started xrootd before, kill it: <tt>killall xrootd</tt>.</p>
<p>Edit xpd.cf with your preferred editor, 
uncomment this line: <tt># xpd.localwrks 2</tt> (remove the # sign) and replace 2 by 6.</p>
So this line:
<pre>
# xpd.localwrks 2
</pre>
Becomes:
<pre>
xpd.localwrks 6
</pre>

<p>Save the file and now you can restart xrootd deamon:</p>
<pre>
xrootd -c xpd.cf -b
</pre>

<p>Now, when you start Proof with <tt>TProof::Open("localhost")</tt>, you must see 6 workers</p>

<pre>
root [0] TProof::Open("localhost")
Starting master: opening connection ...
Starting master: OK
Opening connections to workers: OK (6 workers)
Setting up worker servers: OK (6 workers)
PROOF set to parallel mode (6 workers)
(class TProof*)0x1fe37d0
root [1]
</pre>
<p>Of course you have more workers now, but you still only have 2 cores - so these 6 workers together will not be more efficient than just 2 workers. And that's why PROOF used two workers by default.
You should be able to see that by comparing the throughput with 2 and 6 workers.</p>

</body>
</html>
